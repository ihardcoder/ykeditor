<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ykeditor/ui/ui_editor.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ykeditor/ui/ui_editor.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @desc UI-编辑器正文区
 */
YKEditor.prototype.UI.editor = {
  render: function(id) {
    var html = "";
    html += "&lt;li class='ye_li ye_box ye_box_editor'>";
    html += "&lt;div class='ye_editor' style = 'width:100%;'>";
    html += "&lt;div class='ye_head ye_head_editor'>正文";
    html +=
      "&lt;span class='ye_subtitle colorGrey ml8 ye_subtitle_autosave'>已自动保存&lt;/span>";
    html += "&lt;/div>";
    html += "&lt;div class='ye_body ye_body_editor' id='" + id +
      "' style='width:100%;'>&lt;/div>";
    html += "&lt;div class='ye_error c_red'>请填写正文&lt;/div>";
    html += "&lt;/div>";
    html += "&lt;/li>";
    return html;
  },
  // ueditor容器尺寸修正
  restoreSize: function(id) {
    if (!id || !YE.REG_CHAR.test(id)) {
      return;
    }
    var $editor = $("#" + id);
    var width = $editor.width();
    var height = YE.opt.height || YE.config.editor.height;
    $editor.width(width - 2);
    $editor.height(height);
  },
  // 定制自定义工具栏样式
  restyle: function() {
    var $editor = this.$editor_ue;
    var $toolbar = this.$editor_toolbar;
    var $toolbar_gain = $('.edui-for-yeimage').parent('.edui-toolbar');
    var $toolbar_init = $('.edui-for-fontsize').parent('.edui-toolbar');
    $editor.addClass("ye_editor_ue");
    $toolbar.addClass('ye_editor_toolbar');
    $toolbar_gain.css({
      position: 'absolute',
      top: 0,
      left: 0,
      width: '100%',
      padding: '7px 0 0 3px',
      boxSizing: 'border-box',
      borderBottom: 'solid 1px #fff',
      height: '40px'
    });
    $toolbar_init.css({
      position: 'absolute',
      top: '40px',
      left: '5px',
      height: '30px',
      boxSizing: 'border-box',
      paddingTop: '4px'
    });
  },
  // 工具栏fix实现
  doFixToolbar: function() {
    var _this = this;

    var isHeaderFixed = YE.opt.ISHEADERFIXED,
      headerH = YE.opt.HEIGHT_HEADER;
    var $editor = this.$editor_ue;
    var $toolbar = this.$editor_toolbar;
    var _win = _this.$editor_iframe[0].contentWindow;
    var _offset = $editor.offset();
    var toolbar_h, editor_h,
      statusbar_h = 0;

    function doFix(e) {
      var _top;
      var _docTop = (document.documentElement &amp;&amp; document.documentElement.scrollTop) ||
        document.body.scrollTop,
        _docLeft = (document.documentElement &amp;&amp; document.documentElement.scrollLeft) ||
        document.body.scrollLeft;
      var _containerWidth = $editor.css('width').split('px')[0];
      editor_h = parseInt($editor.css('height').split('px')[0]) + 2;
      _offset = $editor.offset();
      toolbar_h = parseInt($toolbar.css('height').split('px')[0]);

      var _bottom = _offset.top + editor_h - statusbar_h - toolbar_h;

      if (isHeaderFixed) {
        if (_docTop + headerH > _bottom) {
          _top = _bottom - _docTop;
        } else {
          _top = headerH;
        }
        _docTop += headerH;
      }

      if (_docTop > _offset.top) {
        $toolbar.css({
          position: 'fixed',
          border: '1px solid #CCCCCC',
          width: _containerWidth - 10 + "px",
          top: _top + 'px',
          left: _offset.left - _docLeft + "px",
          zIndex: 1000
        });
      } else {
        $toolbar.css({
          position: 'static',
          border: 'none',
          width: 'auto',
          borderBottom: '1px solid #CCCCCC'
        });
      }
    }
    doFix();
    $(window).on("scroll resize", doFix);
    $(_win).on("resize", doFix);
  }

};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="YKEditor.html">YKEditor</a></li></ul><h3>Namespaces</h3><ul><li><a href="YE.html">YE</a></li><li><a href="YE.Ajax.html">Ajax</a></li><li><a href="YE.Bind.html">Bind</a></li><li><a href="YE.Dialog.html">Dialog</a></li><li><a href="YE.Handler.html">Handler</a></li><li><a href="YE.Plugins.html">Plugins</a></li><li><a href="YE.UI.html">UI</a></li><li><a href="YE.Util.html">Util</a></li><li><a href="YKEditor_UI.html">UI</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Wed Nov 18 2015 10:31:06 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
